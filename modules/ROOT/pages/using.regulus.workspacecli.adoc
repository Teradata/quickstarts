= Use Regulus With Workspaces CLI
:experimental:
:page-author: Thripti Aravind
:page-email: thripti.aravind@teradata.com
:page-revdate: April 10th, 2023
:description: Use Workspaces CLI to use Regulus 
:keywords: Regulus, Workspaces, Query Engine

IMPORTANT: This product is in preview and is subject to change. To get early access to Regulus, contact Support.

== Overview

Workspaces CLI is a command line interface (CLI) for Regulus. This document provides step-by-step instructions to install Workspaces CLI. In this document, you can find all the necessary information and guidance on the CLI commands, allowing you to navigate the command line quickly and efficiently. 

You can also use JupyterLab as your Regulus interface. See xref::getting.started.regulus.adoc[].

== Before You Begin

Make sure you have:

* Installed, configured, and set up Workspaces using the steps outlined in xref::install.regulus.docker.adoc[].
* Copied and retained the AWS environment variables and API Key.


== Install Workspaces CLI

Download the Workspaces CLI executable file from <location>.

NOTE: Workspaces CLI supports all major operating systems.

== Use Workspaces CLI

1. Open the terminal window and run the workspacesctl file.
+
[tabs]
====
Windows::
+
--
[source, powershell, role="content-editable emits-gtm-events", id="run_workspaces_win"]
----
worksapcesctl.exe
----
--
MacOS::
+
--
[source, bash, role="content-editable emits-gtm-events", id="run_workspaces_macos"]
----
$ workspacesctl 
----
--
====
+
image::regulus/reguluscli.workspaces.png[Regulus CLI, width=500]

For a supported list of commands, see <<_workspaces_cli_reference, Workspaces CLI Reference>>.

Example data exploration steps:
<Put example here>

== Workspaces CLI Reference

=== workspaces config

**Description**: One-time configuration to bind CLI with the Workspaces service. Go to the Workspaces Profile page and copy the API Key.

**Usage**: 

[source, bash, id="workspaces_config", role="content-editable emits-gtm-events"]
----
workspacesctl workspaces config
----

**Flags**: 

`-h`, `--help`:   List the details of the command.

**Output**:

image::regulus/reguluscli.workspaces.config.png[Regulus CLI Config, width=500]

Follow the prompts to choose the Workspaces endpoint and API Key.

=== workspaces user list

**Description**: View the list of users set up for Regulus on GitHub.

**Usage**:
[source, bash, id="workspaces_user_list", role="content-editable emits-gtm-events"]
----
workspacesctl workspaces user list --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**: 

`-h`, `--help`:   List the details of the command.

**Output**:

image::regulus/reguluscli.user.list.png[Regulus CLI User List, width=500]

=== project create

**Description**: Create a project in Regulus. The command also creates a corresponding GitHub repository for the project.

**Usage**:
[source, bash, id="workspaces_project_create", role="content-editable emits-gtm-events"]
----
workspacesctl project create <Project_Name> -e <CSP> --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**:
[cols="1,1,1,1"]
|===
|Flag |Type| Description |Required?

|`-e`, `--environment` 
|String
|Environment where the project query engine is hosted. Values: aws, azure, or gcloud. Currently, Regulus supports only aws.
|Yes

|`-f`, `--manifest`
|String
|Path to manifest the yaml file to be used for the input.
|No

|`-t`, `--team`
|String
|Team assigned to the project.
|No

|`-h`, `--help`
|
|List the details of the command.	
|No

|===

**Output**:

image::regulus/reguluscli.project.create.png[Regulus CLI Project Create, width=500]

=== project list

**Description**: View the list of all projects set up in Regulus. 

**Usage**:
[source, bash, id="workspaces_project_list", role="content-editable emits-gtm-events"]
----
workspacesctl project list --no-tls
----
or
[source, bash, id="workspaces_project_list_name", role="content-editable emits-gtm-events"]
----
workspacesctl project list <Project_Name> --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**: 

`-h`, `--help`:   List the details of the command.

**Output**:

image::regulus/reguluscli.project.list.png[Regulus CLI Project List, width=500]

=== project delete

**Description**: Delete a project in Regulus.

**Usage**:
[source, bash, id="workspaces_project_delete", role="content-editable emits-gtm-events"]
----
 workspacesctl project delete <Project_Name> --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**: 

`-h`, `--help`:   List the details of the command.

**Output**:

<Insert Image>

=== project user list

**Description**: View the list of collaborators assigned to the project in GitHub.

**Usage**:
[source, bash, id="workspaces_project_user_list", role="content-editable emits-gtm-events"]
---- 
workspacesctl project user list <Project_Name> --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**: 

`-h`, `--help`:   List the details of the command.

**Output**:

image::regulus/reguluscli.project.user.list.png[Regulus CLI Project User List, width=500]

=== project backup

**Description**:  Back up the query engine object definitions to the GitHub repository assigned for the project.

**Usage**:
[source, bash, id="workspaces_project_backup", role="content-editable emits-gtm-events"]
----  
workspacesctl project backup <Project_Name> --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**: 

`-h`, `--help`:   List the details of the command.

**Output**:

<Insert Output screenshot>

=== project restore

**Description**: Restore all query engine object definitions from the project GitHub repository.

**Usage**:
[source, bash, id="workspaces_project_restore", role="content-editable emits-gtm-events"]
----  
workspacesctl project restore <Project_Name> --no-tls
----
or

[source, bash, id="workspaces_project_restore_name", role="content-editable emits-gtm-events"]
----  
workspacesctl project restore <Project_Name> --gitref <git_reference> --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**:
[cols="1,1,1,1"]
|===
|Flag |Type| Description |Required?

|`-g`, `--gitref` 
|String
|Tag, SHA, or branch name
|No

|`-h`, `--help`
|
|List the details of the command.	
|No

|===

**Output**:

<Insert Output screenshot>

=== project engine deploy

**Description**: Deploy a query engine for the project.

**Usage**:
[source, bash, id="workspaces_project_engine_deploy", role="content-editable emits-gtm-events"]
---- 
workspacesctl project engine deploy <Project_Name> -t small --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**:
[cols="1,1,1,1"]
|===
|Flag |Type| Description |Required?

|`-c`, `--instance-count` 
|Int
|Number of query engine nodes. The default value is 1.	
|No

|`-t`, `--instance-size` 
|String
|Instance size of the query engine.
|No

|`-f`, `--manifest`	
|String	
|Path to manifest the yaml file to use for the input.	
|No

|`-r`, `--region`	
|String	
|Region for the deployment.	
|No

|`-s`, `--subnet-id`	
|String	
|Subnet ID for the deployment.	
|No

|`-h`, `--help`
|
|List the details of the command.	
|No

|===

**Output**:

<Insert Output screenshot>

=== project engine suspend

**Description**: Destroy the deployed query engine and back up the object definitions created during the session.

**Usage**:
[source, bash, id="workspaces_project_engine_suspend", role="content-editable emits-gtm-events"]
---- 
workspacesctl project engine suspend <Project_Name> --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**: 

`-h`, `--help`:   List the details of the command.

**Output**:

<Insert Output screenshot>

=== project engine list

**Description**: View the detailed information about the query engine for a project. The command displays the last state of the query engine.

**Usage**:
[source, bash, id="workspaces_project_engine_list", role="content-editable emits-gtm-events"]
----
workspacesctl project engine list <Project_Name> --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**: 

`-h`, `--help`:   List the details of the command.

**Output**:

<Insert Output screenshot>

=== project auth create

**Description**: Create authorization for object store.

**Usage**:
[source, bash, id="workspaces_project_auth_create", role="content-editable emits-gtm-events"]
----
workspacesctl project auth create <Project_Name> -n <Auth_Name> -a <Auth_Key> -s <Auth_Secret> -r <ObjectStore_Region> --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**:
[cols="1,1,1,1"]
|===
|Flag |Type| Description |Required?

|`-a`, `--accesskey` 
|String
|Authorization access key or ID.	
|Yes, if you're not using the `-f` flag.

|`-n`, `--name string`  
|String
|Authorization name for the object store.
|Yes, if you're not using the `-f` flag.

|`-f`, `--manifest`	
|String	
|Path to manifest the yaml file to use for the input.	
|No

|`-r`, `--region`	
|String	
|Region of the object store.	
|Yes

|-s, --secret string	
|String	
|Authorization secret access key of the object store.		
|Yes, if you're not using the `-f` flag.

|`-h`, `--help`
|
|List the details of the command.	
|No

|===

**Output**:

<Insert Output screenshot>

=== project auth list

**Description**: List object store authorizations that are created for a project.

**Usage**:
[source, bash, id="workspaces_project_auth_list", role="content-editable emits-gtm-events"]
----
workspacesctl project auth list <Project_Name> --no-tls
----
NOTE: If your setup includes TLS configuration,  you need not add the `-no-tls` parameter.

**Flags**:

`-h`, `--help`:   List the details of the command.

**Output**:

<Insert Output screenshot>

=== project auth delete

**Description**: Delete object store authorizations that are created for a project.

**Usage**:
[source, bash, id="workspaces_project_auth_delete", role="content-editable emits-gtm-events"]
----
workspacesctl project auth delete <Project_Name> -n <Auth_Name> --no-tls
----
NOTE: If your setup includes TLS configuration, you need not add the `-no-tls` parameter.

**Flags**:
[cols="1,1,1,1"]
|===
|Flag |Type| Description |Required?

|`-n`, `--name` 
|String
|Name of the object store authorization to delete.
|Yes

|`-h`, `--help`
|
|List the details of the command.	
|No

|===

**Output**:

<Insert Output screenshot>
